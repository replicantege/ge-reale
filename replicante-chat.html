<div id="ai-chat" style="position: fixed; bottom: 15px; right: 15px; width: 300px; background: rgba(10, 10, 10, 0.95); border: 1px solid #00f2ff; border-radius: 5px; box-shadow: 0 0 15px rgba(0,242,255,0.3); font-family: 'Courier New', monospace; z-index: 10000; backdrop-filter: blur(5px);">
    <div style="background: #00f2ff; color: #000; padding: 8px; font-weight: bold; text-transform: uppercase; font-size: 11px; display: flex; justify-content: space-between;">
        <span>SYS_MOD: ONLINE</span>
        <span style="cursor:pointer" onclick="document.getElementById('ai-chat').style.display='none'">[CHIUDI]</span>
    </div>
    
    <div id="chat-box" style="height: 200px; overflow-y: auto; padding: 12px; font-size: 12px; color: #00f2ff; background: transparent;">
        <p><span style="color: #ff3c00;">[SISTEMA]:</span> Interfaccia attiva. Sono il Moderatore del Bunker. Cosa cerchi nel GE-Reale?</p>
    </div>
    
    <div style="padding: 8px; border-top: 1px solid #333; display: flex; background: #111;">
        <input type="text" id="user-msg" placeholder="Inserisci comando..." style="flex: 1; padding: 6px; border: 1px solid #333; background: #000; color: #00f2ff; border-radius: 2px; outline: none; font-size: 11px;">
        <button onclick="handleChat()" style="margin-left: 5px; cursor: pointer; background: transparent; color: #00f2ff; border: 1px solid #00f2ff; padding: 5px; font-size: 9px; text-transform: uppercase; font-weight: bold;">INVIO</button>
    </div>
</div>

<script>
const responses = {
    "ciao": "Connessione stabilita. Il Bunker è vigile.",
    "aiuto": "Naviga tra i dossier o lascia una segnalazione sul Muro.",
    "chi sei": "L'interfaccia neurale del Replicante. Proteggo la verità.",
    "pane": "Il Pane dei Vili qui non è gradito.",
    "genova": "Genova merita di più di questo silenzio.",
    "conte": "Il dossier sul trasformismo è pronto. Consulta la sezione dedicata.",
    "default": "Comando ricevuto. Analisi in corso..."
};

const blacklist = ["scemo", "stupido", "idiota", "vile"];

function handleChat() {
    const input = document.getElementById('user-msg');
    const box = document.getElementById('chat-box');
    const msg = input.value.trim().toLowerCase();
    
    if(!msg) return;

    box.innerHTML += `<p><span style="color: #666;">[UTENTE]:</span> ${input.value}</p>`;

    let containsBadWord = blacklist.some(word => msg.includes(word));
    
    setTimeout(() => {
        if (containsBadWord) {
            box.innerHTML += `<p style="color: #ff3c00;"><strong>[MOD]:</strong> Linguaggio non conforme. Rispetta il Bunker.</p>`;
        } else {
            let reply = responses["default"];
            for (let key in responses) {
                if (msg.includes(key)) {
                    reply = responses[key];
                    break;
                }
            }
            box.innerHTML += `<p><span style="color: #ff3c00;">[SISTEMA]:</span> ${reply}</p>`;
        }
        box.scrollTop = box.scrollHeight;
    }, 600);

    input.value = "";
}
</script>